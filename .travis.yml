language: android
dist: jammy
jdk: openjdk11

android:
  components:
    - platform-tools
    - build-tools;30.0.0
    - platforms;android-30
    - extras;android;m2repository
    - extras;google;auto

before_install:
  - export ANDROID_SDK_ROOT=/usr/local/android-sdk
  - sudo rsync -a ${ANDROID_SDK_ROOT}/cmdline-tools/bin/ ${ANDROID_SDK_ROOT}/cmdline-tools/latest/bin/
  - sudo rsync -a ${ANDROID_SDK_ROOT}/cmdline-tools/lib/ ${ANDROID_SDK_ROOT}/cmdline-tools/latest/lib/
  - sudo cp -n ${ANDROID_SDK_ROOT}/cmdline-tools/NOTICE.txt ${ANDROID_SDK_ROOT}/cmdline-tools/latest/
  - sudo cp -n ${ANDROID_SDK_ROOT}/cmdline-tools/source.properties ${ANDROID_SDK_ROOT}/cmdline-tools/latest/

script:
  - export ANDROID_SDK_ROOT=/usr/local/android-sdk
  - export PATH=${ANDROID_SDK_ROOT}/cmdline-tools/latest/bin:$PATH
  - sdkmanager --version
