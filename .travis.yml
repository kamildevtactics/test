os: linux
dist: jammy

jobs:
  include:
    - name: "Check Podman Installation and Install if Not Present"
      script:
        # Check if podman is installed initially
        - echo "Checking if Podman is installed..."
        - command -v podman >/dev/null 2>&1 && echo "Podman is already installed" || echo "Podman is NOT installed"
        
        - echo "Installing Podman..."
        - sudo apt-get update
        - sudo apt-get install -y podman
        
        # Verify installation was successful
        - echo "Verifying Podman installation..."
        - podman --version
        
        # Check podman service
        - systemctl list-unit-files | grep podman || echo "No Podman service found"
        
        # Check package information
        - dpkg -l | grep -i podman
        
        # Test basic functionality
        - echo "Testing Podman functionality..."
        - podman info
        - podman pull hello-world
        - podman run hello-world
