language: shell
dist: jammy
group: dev

services:
  - elasticsearch  

before_install:
  - sudo systemctl status elasticsearch || true
  - sudo journalctl -xeu elasticsearch.service || true
  - until curl --silent -XGET --fail http://localhost:9200/_cluster/health?pretty; do printf '...\n'; sleep 2; done

install: skip

script:
  - curl -s http://localhost:9200
  - curl -s http://localhost:9200/_cluster/health?pretty
