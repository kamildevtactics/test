language: php

os: linux
dist: jammy

php:
  - 8.4

before_script:
  - php -v
  - php -r "echo 'PHP Version check: ' . (version_compare(PHP_VERSION, '8.4.0', '>=') ? 'PHP 8.4 is available' : 'PHP 8.4 is not available');"
  - php -r "echo PHP_EOL . 'Detailed version info: ' . PHP_VERSION;"
  - composer self-update
  - composer install --no-interaction

script:
  - echo "Running tests for PHP 8.4 compatibility"
  - php -r "if(version_compare(PHP_VERSION, '8.4.0', '<')) { echo 'PHP version below 8.4, failing build'; exit(1); }"
  - vendor/bin/phpunit
